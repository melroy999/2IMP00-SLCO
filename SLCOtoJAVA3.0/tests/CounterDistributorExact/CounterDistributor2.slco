model CounterDistributor2 {
    classes
    CounterDistributor {
        variables Integer x
        state machines
        Counter {
            initial C1 states C2
            transitions
                from C1 to C2 {
                    x := 0;
                }
                from C2 to C1 {
                    x := 1;
                }
        }
        Distributor {
            initial P states S1 S2
            transitions
                from P to S1 {
                    x = 0;
                }
                from S1 to P {
                }
                from P to S2 {
                    x != 0;
                }
                from S2 to P {
                }
        }
    }
    objects p: CounterDistributor()
}
