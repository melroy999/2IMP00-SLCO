model CounterDistributor8 {
    classes
    CounterDistributor {
        variables Integer x
        state machines
        Counter {
            initial C1 states C2 C3 C4 C5 C6 C7 C8
            transitions
                from C1 to C2 {
                    x := 0;
                }
                from C2 to C3 {
                    x := 1;
                }
                from C3 to C4 {
                    x := 2;
                }
                from C4 to C5 {
                    x := 3;
                }
                from C5 to C6 {
                    x := 4;
                }
                from C6 to C7 {
                    x := 5;
                }
                from C7 to C8 {
                    x := 6;
                }
                from C8 to C1 {
                    x := 7;
                }
        }
        Distributor {
            initial P states S1 S2 S3 S4 S5 S6 S7 S8
            transitions
                from P to S1 {
                    x = 0;
                }
                from S1 to P {
                }
                from P to S2 {
                    x = 1;
                }
                from S2 to P {
                }
                from P to S3 {
                    x = 2;
                }
                from S3 to P {
                }
                from P to S4 {
                    x = 3;
                }
                from S4 to P {
                }
                from P to S5 {
                    x = 4;
                }
                from S5 to P {
                }
                from P to S6 {
                    x = 5;
                }
                from S6 to P {
                }
                from P to S7 {
                    x = 6;
                }
                from S7 to P {
                }
                from P to S8 {
                    x = 7;
                }
                from S8 to P {
                }
        }
    }
    objects p: CounterDistributor()
}
